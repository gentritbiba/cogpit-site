---
import BaseLayout from "../layouts/BaseLayout.astro";
import HeroSection from "../components/HeroSection.astro";
import MockTeamsDashboard from "../components/MockTeamsDashboard";
---

<BaseLayout title="Agent Teams — Cogpit" description="Monitor multi-agent teams collaborating on complex tasks in Claude Code.">
  <HeroSection backLink>
    <h1 class="text-3xl font-bold tracking-tight sm:text-4xl">Agent Teams</h1>
    <p class="mt-4 max-w-2xl text-base text-zinc-400 leading-relaxed">
      Claude Code supports multi-agent teams where specialized agents collaborate on complex tasks.
      Cogpit gives you full visibility into these teams — see who's doing what, track task progress,
      and monitor inter-agent communication in real-time.
    </p>

    <div class="mt-6 flex gap-3 rounded-lg border border-amber-500/20 bg-amber-500/5 px-4 py-3 max-w-2xl">
      <svg class="h-5 w-5 text-amber-400 shrink-0 mt-0.5" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
        <path stroke-linecap="round" stroke-linejoin="round" d="M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"></path>
      </svg>
      <p class="text-sm text-amber-200/80 leading-relaxed">
        Due to Claude Code limitations, agent teams work best when you <strong class="text-amber-300">start the session from a terminal</strong> and use Cogpit as a monitoring dashboard. This gives you full visibility into all agents without interfering with their work.
      </p>
    </div>
  </HeroSection>

  <!-- Interactive Demo -->
  <section class="border-t border-zinc-800/50">
    <div class="mx-auto max-w-5xl px-6 py-16">
      <div class="mb-8">
        <h2 class="text-xl font-bold">Try it yourself</h2>
        <p class="mt-2 text-sm text-zinc-400">
          Explore the <strong class="text-blue-400">teams dashboard</strong> below — members grid with roles and active tasks, kanban task board with dependency tracking, and a real-time activity timeline.
        </p>
      </div>
      <div class="rounded-2xl border border-zinc-800 bg-zinc-950/50 p-4 sm:p-6">
        <MockTeamsDashboard client:load />
      </div>
    </div>
  </section>

  <!-- How it works -->
  <section class="border-t border-zinc-800/50">
    <div class="mx-auto max-w-4xl px-6 py-16">
      <h2 class="text-xl font-bold mb-10">How it works</h2>

      <div class="space-y-12">
        <!-- Step 1 -->
        <div class="flex gap-6 items-start">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-blue-500/10 border border-blue-500/20">
            <span class="text-sm font-bold text-blue-400">1</span>
          </div>
          <div>
            <h3 class="text-base font-semibold mb-2">Create a team</h3>
            <p class="text-sm text-zinc-400 leading-relaxed">
              A team lead agent spawns the team using <code class="text-xs bg-zinc-800 px-1.5 py-0.5 rounded">TeamCreate</code>,
              defining the project scope and creating a shared task list. Teammates are spawned with the
              <code class="text-xs bg-zinc-800 px-1.5 py-0.5 rounded">Task</code> tool, each with a role and model assignment.
            </p>
          </div>
        </div>

        <!-- Step 2 -->
        <div class="flex gap-6 items-start">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-green-500/10 border border-green-500/20">
            <span class="text-sm font-bold text-green-400">2</span>
          </div>
          <div>
            <h3 class="text-base font-semibold mb-2">Assign tasks with dependencies</h3>
            <p class="text-sm text-zinc-400 leading-relaxed">
              Tasks are created with <code class="text-xs bg-zinc-800 px-1.5 py-0.5 rounded">TaskCreate</code> and assigned to teammates.
              Dependencies between tasks are tracked automatically — blocked tasks can't start until their blockers complete.
              The kanban board shows this with
              <span class="inline-flex items-center mx-1 rounded border border-yellow-700/50 bg-yellow-500/10 px-1.5 py-0.5 text-[10px] text-yellow-400 font-medium">Blocked by #N</span>
              and
              <span class="inline-flex items-center mx-1 rounded border border-zinc-700 bg-zinc-800 px-1.5 py-0.5 text-[10px] text-zinc-400 font-medium">Blocks #N</span>
              badges.
            </p>
          </div>
        </div>

        <!-- Step 3 -->
        <div class="flex gap-6 items-start">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-purple-500/10 border border-purple-500/20">
            <span class="text-sm font-bold text-purple-400">3</span>
          </div>
          <div>
            <h3 class="text-base font-semibold mb-2">Agents collaborate</h3>
            <p class="text-sm text-zinc-400 leading-relaxed">
              Teammates work independently on their assigned tasks, sending messages via
              <code class="text-xs bg-zinc-800 px-1.5 py-0.5 rounded">SendMessage</code> to coordinate.
              The activity timeline shows all communication — plain chat messages, task assignments, idle notifications,
              and shutdown requests — with color-coded senders and timestamps.
            </p>
          </div>
        </div>

        <!-- Step 4 -->
        <div class="flex gap-6 items-start">
          <div class="flex h-10 w-10 shrink-0 items-center justify-center rounded-xl bg-amber-500/10 border border-amber-500/20">
            <span class="text-sm font-bold text-amber-400">4</span>
          </div>
          <div>
            <h3 class="text-base font-semibold mb-2">Monitor everything in Cogpit</h3>
            <p class="text-sm text-zinc-400 leading-relaxed">
              Cogpit connects via SSE for live updates. Click any member to jump into their individual session.
              The team lead is marked with a
              <span class="inline-flex items-center mx-1 text-yellow-500">
                <svg class="h-3.5 w-3.5" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z"/><path d="M5.09 21h13.82"/></svg>
              </span>
              crown icon. Active tasks show a spinning indicator with the task's current activity.
            </p>
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Use cases -->
  <section class="border-t border-zinc-800/50">
    <div class="mx-auto max-w-4xl px-6 py-16">
      <h2 class="text-xl font-bold mb-8">When to use teams</h2>
      <div class="grid gap-4 sm:grid-cols-3">
        <div class="rounded-xl border border-zinc-800 bg-zinc-900/30 p-5 transition-colors hover:border-zinc-700">
          <div class="mb-2 flex h-8 w-8 items-center justify-center rounded-lg bg-blue-500/10">
            <svg class="h-4 w-4 text-blue-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z"></path>
            </svg>
          </div>
          <h3 class="text-sm font-semibold mb-1.5">Large features</h3>
          <p class="text-xs text-zinc-400 leading-relaxed">
            Split a full-stack feature across frontend, backend, and testing agents. Each works in parallel with task dependencies keeping things in order.
          </p>
        </div>
        <div class="rounded-xl border border-zinc-800 bg-zinc-900/30 p-5 transition-colors hover:border-zinc-700">
          <div class="mb-2 flex h-8 w-8 items-center justify-center rounded-lg bg-green-500/10">
            <svg class="h-4 w-4 text-green-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-5.197-5.197m0 0A7.5 7.5 0 105.196 5.196a7.5 7.5 0 0010.607 10.607z"></path>
            </svg>
          </div>
          <h3 class="text-sm font-semibold mb-1.5">Research + implement</h3>
          <p class="text-xs text-zinc-400 leading-relaxed">
            One agent researches APIs and patterns while another implements. The researcher feeds findings to the developer through messages.
          </p>
        </div>
        <div class="rounded-xl border border-zinc-800 bg-zinc-900/30 p-5 transition-colors hover:border-zinc-700">
          <div class="mb-2 flex h-8 w-8 items-center justify-center rounded-lg bg-amber-500/10">
            <svg class="h-4 w-4 text-amber-400" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
              <path stroke-linecap="round" stroke-linejoin="round" d="M11.42 15.17l-5.384 3.184A1 1 0 014.5 17.391V6.609a1 1 0 011.536-.963l5.384 3.184m0 0l5.384 3.184a1 1 0 010 1.726l-5.384 3.184m0-8.094v8.094"></path>
            </svg>
          </div>
          <h3 class="text-sm font-semibold mb-1.5">Refactor at scale</h3>
          <p class="text-xs text-zinc-400 leading-relaxed">
            Multiple agents each refactor different modules simultaneously. The team lead coordinates and reviews while specialists do the work.
          </p>
        </div>
      </div>
    </div>
  </section>
</BaseLayout>
